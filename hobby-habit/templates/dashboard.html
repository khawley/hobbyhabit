{% extends 'base.html' %}

    {% block my_css_link %}
        <!-- <link rel="stylesheet" type="text/css" href="static/.../css"> -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    {% endblock my_css_link %}

    {% block title %}HobbyHabit: Dashboard{% endblock title %}

    <div class="dashboard">

        {% block body_content %}

        <div id="flash-update-profile-status"></div>
        <div id="flash-tracking-status"></div>

        <div class="menu-btns">

            <div id="user-profile">
                <button id="user-profile-menu-btn" class="btn-info btn-lg" type="button">
                    User Profile
                </button>
                <br><br>

                <div id="user-profile-content">
                    <form id="user-profile-form">
                        Username
                        <br>
                        <input id="username" type="text" name="username" value="{{ current_user.username }}" disabled>
                        <br><br>

                        Email
                        <br>
                        <input id="email" type="email" name="email" value="{{ current_user.email }}" disabled>
                        <br><br>

                        <!-- Modal trigger button -->
                        <button id="update-password-btn" class="btn btn-info" type="button">
                            Update password
                        </button>
                        <br><br>

                        First name
                        <br>
                        <input id="first-name" type="text" name="first-name" value=""> 
                        <input id="hidden-first-name" type="hidden" name="hidden-first-name" value="{{ current_user.first_name }}">
                        <br><br>

                        Last name
                        <br>
                        <input id="last-name" type="text" name="last-name" value="">
                        <input id="hidden-last-name" type="hidden" name="hidden-last-name" value="{{ current_user.last_name }}">
                        <br><br>

                        Zipcode
                        <br>
                        <input id="zipcode" type="text" name="zipcode" value="">
                        <input id="hidden-zipcode" type="hidden" name="hidden-zipcode" value="{{ current_user.zipcode }}">
                        <br><br>

                        Phone number
                        <br>
                        <input id="phone-number" type="text" name="phone-number" value="">
                        <input id="hidden-phone-number" type="hidden" name="hidden-phone-number" value="{{ current_user.phone }}">
                        <br><br>

                        Text message reminder
                        <br>
                        <input id="txt-opt-in" class="txt-reminder"type="radio" name="txt-opt-in-out" value="on"> On
                        <input id="txt-opt-out" class="txt-reminder" type="radio" name="txt-opt-in-out" value="off" checked> Off
                        <br><br>

                        <button id="update-profile" class="btn btn-info" type="button">
                            Save changes to profile
                        </button>
                        <br>

                    </form>
                    <!-- Change password modal. -->
                    <div id="updatePasswordModal" class="modal fade">
                        <div class="modal-dialog">

                            <!-- Change password modal content.-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">
                                        Update Password
                                    </h4>
                                </div>

                                <div class="modal-body">
                                    <form id="update-password-form">
                                        Old password
                                        <br>
                                        <input id="old-password" type="password" name="old-password" required>
                                        <br>
                                        <br>
                                        New password
                                        <br> 
                                        <input id="new-password" type="password" name="new-password" required>
                                        <br>
                                        <br>
                                        Confirm new password
                                        <br> 
                                        <input id="confirm-new-password" type="password" name="confirm-new-password" required>
                                        <br>
                                        <a href="">Forgot password</a> <!-- Add link and and add and commit to DB -->
                                    </form>
                                </div>

                                <div class="modal-footer">
                                    <button id="update-password" class="add-goal-btn btn-info btn-sm">
                                            Update password
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div id="my-hobbyhabits">
                <button id="my-hobbyhabits-menu-btn" class="btn-info btn-lg" type="button">
                    My HobbyHabits
                </button>
                <br><br>

                <div id="my-hobbyhabit-content">

                    {% for user_hobby in current_user_data['user_hobbies'] %}
                        <div id="my-hobbyhabit">
                            <button id="hobbyhabit-btn" class="btn btn-info active hobbyhabit-btn" type="button" data-user-hobby-id="{{ user_hobby['user_hobby_id'] }}">
                                {{ user_hobby['hobby_name'][0].title() }}
                            </button>
                        </div>
                    {% endfor %}

                        <button id="add-hobbyhabit" class="btn btn-info">+</button> <!--add small modal with hobby field every time + is clicked-->

                        <!-- HobbyHabit Tracker. -->
                        <div id="hobbyhabit-tracker">
                            <form id="hobbyhabit-tracker-form">
                                Completion date
                                <br>
                                <input id="completion-date" type="text" name="completion-date" placeholder="-- Completion date --" required>
                                <br><br>
                                Total practice time
                                <br>
                                Hr: <input id="total-hours" type="number" name="total-hours" min="0" max="100" placeholder="hr" required>
                                Min: <input id="total-minutes" type="number" name="total-minutes" min="0" max="1440" placeholder="min" required>
                                <br><br>
                                Notes
                                <br>
                                <textarea id="completion-notes" form="hobbyhabit-tracker-form" rows="6" cols="40" maxlength="500" placeholder="Enter notes here..."></textarea>
                                <br><br>
                                <input type="button" id="hobbyhabit-tracker-btn" class="btn btn-info" value="Track me">
                            </form>
                        </div>

                        <!-- Completions. -->
                        <div id="view-completions">
                            {% for user_hobby in current_user_data['user_hobbies'] %}
                                {% for completions in user_hobby['completions'] %}
                                    {% if user_hobby['user_hobby_id'] == 21 %}  <!-- GET ACTUAL USER HOBBY ID, DO NOT HARDCODE -->
                                        <ul>
                                            <li>Tracked Completion</li>
                                            <b>Completion date:</b> {{ completions['completion_date'] }} <!-- FORMAT THE WAY TIME IS BEIND DISPLAYED -->
                                            <br>
                                            <b>Total practice time:</b> {{ completions['total_practice_time'] }} minutes<!-- FORMAT INTO HOURS + MINUTES -->
                                            <br>
                                            <b>Notes:</b> {{ completions['notes'] }}
                                        </ul>
                                    {% endif %}
                                {% endfor %}
                            {% endfor %}
                        </div>

                        <!-- Goals if any or an add goals form -->

                        <!-- Goals if any or an add goals form -->

                </div>
            </div>

            <div id="social">
                <button id="social-menu-btn" class="btn-info btn-lg" type="button">
                    Social
                </button>
                <br><br>
                <div id="social-content">
                    <p>SHOW LOCAL EVENTS FOR PARTICULAR HOBBYHABIT USING EVENTBRITE API</p>
                </div>
            </div>

            <div id="settings">
                <button id="settings-menu-btn" class="btn-info btn-lg" type="button">
                    Settings
                </button>
                <br><br>
                <div id="settings-content">
                    <p>SHOW USER SETTINGS</p>
                </div>
            </div>

        </div>

        {% endblock body_content %}

    </div>

    {% block js_link %}  
        <script type="text/javascript" src="static/js/dashboard.js"></script>
    {% endblock js_link %}
